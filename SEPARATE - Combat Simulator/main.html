<html>
<head>
<link rel='stylesheet' href='styles.css'/>
</head>
<body>
	<div id='container'>
		<div class='background border spacing'>
			<h1>Global Inputs</h1>
			
			<div class='background sameLineBlock'>
				<ul>
					<li>
						<label for="simulations">Simulations:</label>
						<input type="text" id="simulations" name="simulations" value='' size='2'>
					</li>
					<li>
						<p><strong>Armor Per Level</strong></p>
					</li>
					<li>
						<label for="lightArmorPerLvl">Light</label>
						<input type="text" id="lightArmorPerLvl" name="lightArmorPerLvl" value='12' size='2'>
						<label for="mediumArmorPerLvl">Medium</label>
						<input type="text" id="mediumArmorPerLvl" name="mediumArmorPerLvl" value='15' size='2'>
						<label for="heavyArmorPerLvl">Heavy</label>
						<input type="text" id="heavyArmorPerLvl" name="heavyArmorPerLvl" value='20' size='2'>
					</li>
					<li>
						<p><strong>Stats from Armor Per Level</strong></p>
					</li>
					<li>
						<label for="lightArmorStatsPerLvl">Light</label>
						<input type="text" id="lightArmorStatsPerLvl" name="lightArmorStatsPerLvl" value='20' size='2'>
						<label for="mediumArmorStatsPerLvl">Medium</label>
						<input type="text" id="mediumArmorStatsPerLvl" name="mediumArmorStatsPerLvl" value='15' size='2'>
						<label for="heavyArmorStatsPerLvl">Heavy</label>
						<input type="text" id="heavyArmorStatsPerLvl" name="heavyArmorStatsPerLvl" value='12' size='2'>
					</li>
					<li>
						<p><strong>Weapon Multipliers</strong></p>
					</li>
					<li>
						<label for="strWeapM">STR</label>
						<input type="text" id="strWeapM" name="strWeapM" value='1.1' size='2'>
						<label for="dexWeapM">DEX</label>
						<input type="text" id="dexWeapM" name="dexWeapM" value='1.5' size='2'>
						<label for="intWeapM">INT</label>
						<input type="text" id="intWeapM" name="intWeapM" value='2' size='2'>
					</li>
					<li>
						<p><strong>Rarity Multipliers</strong></p>
					</li>
					<li>
						<label for="common">Common</label>
						<input type="text" id="common" name="common" value='1.0' size='2'>
						<label for="uncommon">Uncommon</label>
						<input type="text" id="uncommon" name="uncommon" value='1.11' size='2'>
						<label for="rare">Rare</label>
						<input type="text" id="rare" name="rare" value='1.24' size='2'>
						<label for="legendary">Legendary</label>
						<input type="text" id="legendary" name="legendary" value='1.41' size='2'>
						<label for="mythic">Mythic</label>
						<input type="text" id="mythic" name="mythic" value='1.63' size='2'>
					</li>
				</ul>
			</div>
			
		</div>

		<!-- PLAYER 1 -->
		<div class='sidePanel background border spacing'>
			<h1>Player 1</h1>

			<ul class='alignLeft'>
				<li>
					<label for="p1Level">Level:</label>
					<input type="text" id="p1Level" name="p1Level" value='100' size='2'>
				</li>
				<li>
					<label for="p1Class">Class:</label>
					<select name="p1Class" id="p1Class">
						<option value="warrior">Warrior</option>
						<option value="berserker">Berserker</option>
						<option value="magicKnight">Magic Knight</option>
						<option value="fencer">Fencer</option>
						<option value="frostMage">Frost Mage</option>
						<option value="fireMage">Fire Mage</option>
						<option value="darkMage">Dark Mage</option>
						<option value="bloodMage">Blood Mage</option>
						<option value="scout">Scout</option>
						<option value="rogue">Rogue</option>
						<option value="demonHunter">Demon Hunter</option>
						<option value="assassin">Assassin</option>
					  </select>
				</li>
				<li>
					<label for="p1Strength">STR/Lvl:</label>
					<input type="text" id="p1Strength" name="p1Strength" value='20' size='2'>
				</li>
				<li>
					<label for="p1Dexterity">DEX/Lvl:</label>
					<input type="text" id="p1Dexterity" name="p1Dexterity" value='5' size='2'>
				</li>
				<li>
					<label for="p1Intelligence">INT/Lvl:</label>
					<input type="text" id="p1Intelligence" name="p1Intelligence" value='5' size='2'>
				</li>
				<li>
					<label for="p1Consitution">CON/Lvl:</label>
					<input type="text" id="p1Consitution" name="p1Consitution" value='15' size='2'>
				</li>
				<li>
					<label for="p1Luck">LUK/Lvl:</label>
					<input type="text" id="p1Luck" name="p1Luck" value='15' size='2'>
				</li>
				<li>
					<label for="p1GearType">Gear Type:</label>
					<select name="p1GearType" id="p1GearType">
						<option value="light">Light</option>
						<option value="medium">Medium</option>
						<option value="heavy">Heavy</option>
					  </select>
				</li>
				<li>
					<label for="p1GearRarity">Gear Rarity:</label>
					<select name="p1GearRarity" id="p1GearRarity">
						<option value="common">Common</option>
						<option value="uncommon">Uncommon</option>
						<option value="rare">Rare</option>
						<option value="legendary">Legendary</option>
						<option value="mythic">Mythic</option>
					  </select>
				</li>
			</ul>

		</div>
		<div class='mainPanel background border spacing'>
			<div>
				<button onclick='startSimulation()'>Fight</button>
			</div>
			<h4>Output</h4>
			<textarea id='output'></textarea>
			<h4>Class Dmg / Armor</h4>
			<textarea id='outputClassInfo'></textarea>
		</div>

		<!-- PLAYER 2 -->
		<div class='sidePanel background border spacing'>
			<h1>Player 2</h1>

			<ul class='alignLeft'>
				<li>
					<label for="p2Level">Level:</label>
					<input type="text" id="p2Level" name="p2Level" value='100' size='2'>
				</li>
				<li>
					<label for="p2Class">Class:</label>
					<select name="p2Class" id="p2Class">
						<option value="warrior">Warrior</option>
						<option value="berserker">Berserker</option>
						<option value="magicKnight">Magic Knight</option>
						<option value="fencer">Fencer</option>
						<option value="frostMage">Frost Mage</option>
						<option value="fireMage">Fire Mage</option>
						<option value="darkMage">Dark Mage</option>
						<option value="bloodMage">Blood Mage</option>
						<option value="scout">Scout</option>
						<option value="rogue">Rogue</option>
						<option value="demonHunter">Demon Hunter</option>
						<option value="assassin">Assassin</option>
					  </select>
				</li>
				<li>
					<label for="p2Strength">STR/Lvl:</label>
					<input type="text" id="p2Strength" name="p2Strength" value='20' size='2'>
				</li>
				<li>
					<label for="p2Dexterity">DEX/Lvl:</label>
					<input type="text" id="p2Dexterity" name="p2Dexterity" value='15' size='2'>
				</li>
				<li>
					<label for="p2Intelligence">INT/Lvl:</label>
					<input type="text" id="p2Intelligence" name="p2Intelligence" value='5' size='2'>
				</li>
				<li>
					<label for="p2Consitution">CON/Lvl:</label>
					<input type="text" id="p2Consitution" name="p2Consitution" value='5' size='2'>
				</li>
				<li>
					<label for="p2Luck">LUK/Lvl:</label>
					<input type="text" id="p2Luck" name="p2Luck" value='15' size='2'>
				</li>
				<li>
					<label for="p2GearType">Gear Type:</label>
					<select name="p2GearType" id="p2GearType">
						<option value="light">Light</option>
						<option value="medium">Medium</option>
						<option value="heavy">Heavy</option>
					  </select>
				</li>
				<li>
					<label for="p2GearRarity">Gear Rarity:</label>
					<select name="p2GearRarity" id="p2GearRarity">
						<option value="common">Common</option>
						<option value="uncommon">Uncommon</option>
						<option value="rare">Rare</option>
						<option value="legendary">Legendary</option>
						<option value="mythic">Mythic</option>
					  </select>
				</li>
			</ul>
		</div>
	</div>
</body>
<script>

	var classes = {
		//STR Classes
		'warrior': {
			'mainStat': 'str',
			'weapons': 1,
			'twoHanded': false,
			'healthMult': 5
		},
		'berserker': {
			'mainStat': 'str',
			'weapons': 1,
			'twoHanded': false,
			'healthMult': 4
		},
		'magicKnight': {
			'mainStat': 'str',
			'weapons': 1,
			'twoHanded': false,
			'healthMult': 5
		},
		'fencer': {
			'mainStat': 'str',
			'weapons': 1,
			'twoHanded': false,
			'healthMult': 4
		},
		//DEX Classes
		'scout': {
			'mainStat': 'dex',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 3
		},
		'rogue': {
			'mainStat': 'dex',
			'weapons': 2,
			'twoHanded': false,
			'healthMult': 3
		},
		'demonHunter': {
			'mainStat': 'dex',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 4
		},
		'assassin': {
			'mainStat': 'dex',
			'weapons': 1,
			'twoHanded': false,
			'healthMult': 3
		},
		//INT Classes
		'frostMage': {
			'mainStat': 'int',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 2
		},
		'fireMage': {
			'mainStat': 'int',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 2
		},
		'bloodMage': {
			'mainStat': 'int',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 2
		},
		'darkMage': {
			'mainStat': 'int',
			'weapons': 1,
			'twoHanded': true,
			'healthMult': 2
		}
	}


	function startSimulation(){
		
		var simulations = document.getElementById('simulations').value

		var player1 =  createPlayer('1')
		var player2 =  createPlayer('2')
		
		//Calculate Stats
		calculateStats(player1)
		calculateStats(player2)

		//Calculate Final Stats
		calculateFinalStats(player1)
		calculateFinalStats(player2)

		console.log(player1)
		console.log(player2)
	}

	//===============================
	//	Helper Functions
	//===============================

	function createPlayer(playerNum){
		var player = {
			'level': document.getElementById('p' + playerNum + 'Level').value,
			'class': document.getElementById('p' + playerNum + 'Class').value,
			'strPerLvl': document.getElementById('p' + playerNum + 'Strength').value,
			'dexPerLvl': document.getElementById('p' + playerNum + 'Dexterity').value,
			'intPerLvl': document.getElementById('p' + playerNum + 'Intelligence').value,
			'conPerLvl': document.getElementById('p' + playerNum + 'Consitution').value,
			'lukPerLvl': document.getElementById('p' + playerNum + 'Luck').value,
			'gearType': document.getElementById('p' + playerNum + 'GearType').value,
			'gearRarity': document.getElementById('p' + playerNum + 'GearRarity').value
		}
		return player
	}

	function calculateStats(player){
		var level = player['level']
		
		player['str'] = level * player['strPerLvl']
		player['dex'] = level * player['dexPerLvl']
		player['int'] = level * player['intPerLvl']
		player['con'] = level * player['conPerLvl']
		player['luk'] = level * player['lukPerLvl']
		player['armor'] = level * document.getElementById(player['gearType'] + 'ArmorPerLvl').value
	}

	function calculateFinalStats(player){
		var level = player['level']
		var pClass = player['class']
		var mainStat = classes[pClass]['mainStat']
		
		if(level <= 5){
			player['dmg'] = (level ** 2) * Math.floor(player[mainStat]/20) + 10
			player['health'] = (level ** 2) * 4 * Math.floor(player['con']/20) + 60
		} else {
			player['dmg'] = (level ** 2) * Math.floor(player[mainStat]/30) + 10
			player['health'] = (level ** 2) * 4 * Math.floor(player['con']/30) + 60
		}

		player['armorReduction'] = (player['armor'])/(level * 60) * 100
		player['critChance'] = (player['luk'])/(level * 60) * 100

		player['strResistance'] = Math.floor(player['str'] / 2)
		player['dexResistance'] = Math.floor(player['dex'] / 2)
		player['intResistance'] = Math.floor(player['int'] / 2)
	}

	//===============================
	// CALCULATIONS
	//===============================

	var output = ''
	var total = 0
	var total2 = 0
	var total3 = 0
	var questXp = 0

	for(var i=1; i<=100; i++){
		var gold = (i ** 3) + 300
		var statCost = Math.floor((i ** 2.2)/20 + 1)
		var xp = Math.floor((i ** 2) * i ** 1.3) + 50
		questXp = Math.floor((i ** 2)) + 10
		var questsNeeded = Math.floor(xp / questXp)
		total += gold
		total2 += statCost
		total3 += xp
		output += i + '\t' + gold + '\t' + total + '\t' + statCost + '\t' + total2 + '\t' + xp + '\t' + total3 + '\t' + questXp + '\t' + questsNeeded + '\n'
	}
	document.getElementById('output').value = output
	
	var output2 = ''

	for(var i=1; i<=100; i++){
		//wpn dmg * str stat + 10
		var mainStat = (i*20)
		var conStat = (i*15)
		var dmg
		if(i<5)
			dmg = (i ** 2) * Math.floor(mainStat/20) + 10
		else
			dmg = (i ** 2) * Math.floor(mainStat/30) + 10
		var health
		if(i<5)
			health = (i ** 2) * 4 * Math.floor(conStat/20) + 60
		else
			health = (i ** 2) * 4 * Math.floor(conStat/30) + 60
		var armor = (i*15)/(i*60) * 100
		var critChance = (i*15)/(i*60) * 100
		var res1 = (i*5) / 2 //times by two for both stats
		var newMainStat = mainStat - res1
		var newDmg
		if(i<5)
			newDmg = (i ** 2) * Math.floor(newMainStat/20) + 10
		else
			newDmg = (i ** 2) * Math.floor(newMainStat/30) + 10

		output2 += i + '\t' + dmg + '\t' + health + '\t' + armor + '\t' + critChance + '\t' + mainStat + '\t' + res1 + '\t' + newMainStat + '\t' + newDmg + '\n'// + questsNeeded + '\n'
	}
	document.getElementById('outputClassInfo').value = output2

</script>
</html>